
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>SR_Post &#8212; sarracenia 3.00.013 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">sarracenia 3.00.013 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">SR_Post</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="sr-post">
<h1><a class="toc-backref" href="#id5">SR_Post</a><a class="headerlink" href="#sr-post" title="Permalink to this headline">¶</a></h1>
<section id="publish-the-availability-of-a-file-to-subscribers">
<h2><a class="toc-backref" href="#id6">Publish the Availability of a File to Subscribers</a><a class="headerlink" href="#publish-the-availability-of-a-file-to-subscribers" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">Manual section</dt>
<dd class="field-odd"><p>1</p>
</dd>
<dt class="field-even">Date</dt>
<dd class="field-even"><p>&#64;Date&#64;</p>
</dd>
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>&#64;Version&#64;</p>
</dd>
<dt class="field-even">Manual group</dt>
<dd class="field-even"><p>MetPx Sarracenia Suite</p>
</dd>
</dl>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sr-post" id="id5">SR_Post</a></p>
<ul>
<li><p><a class="reference internal" href="#publish-the-availability-of-a-file-to-subscribers" id="id6">Publish the Availability of a File to Subscribers</a></p>
<ul>
<li><p><a class="reference internal" href="#synopsis" id="id7">SYNOPSIS</a></p></li>
<li><p><a class="reference internal" href="#description" id="id8">DESCRIPTION</a></p>
<ul>
<li><p><a class="reference internal" href="#mandatory-settings" id="id9">Mandatory Settings</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#arguments-and-options" id="id10">ARGUMENTS AND OPTIONS</a></p>
<ul>
<li><p><a class="reference internal" href="#c-config-configfile" id="id11">[-c|–config &lt;configfile&gt;]</a></p></li>
<li><p><a class="reference internal" href="#p-path-path1-path2-pathn" id="id12">[-p|–path path1 path2 … pathN]</a></p></li>
<li><p><a class="reference internal" href="#pb-post-broker-broker" id="id13">[-pb|–post_broker &lt;broker&gt;]</a></p></li>
<li><p><a class="reference internal" href="#pbd-post-base-dir-path" id="id14">[-pbd|–post_base_dir &lt;path&gt;]</a></p></li>
<li><p><a class="reference internal" href="#px-post-exchange-exchange" id="id15">[-px|–post_exchange &lt;exchange&gt;]</a></p></li>
<li><p><a class="reference internal" href="#h-help-help" id="id16">[-h|-help|–help]</a></p></li>
<li><p><a class="reference internal" href="#blocksize-value" id="id17">[–blocksize &lt;value&gt;]</a></p></li>
<li><p><a class="reference internal" href="#pbu-post-base-url-url" id="id18">[-pbu|–post_base_url &lt;url&gt;]</a></p></li>
<li><p><a class="reference internal" href="#pipe-boolean" id="id19">[-pipe &lt;boolean&gt;]</a></p></li>
<li><p><a class="reference internal" href="#pulse-message-message" id="id20">[–pulse_message &lt;message&gt;]</a></p></li>
<li><p><a class="reference internal" href="#reset" id="id21">[–reset]</a></p></li>
<li><p><a class="reference internal" href="#rn-rename-path" id="id22">[-rn|–rename &lt;path&gt;]</a></p></li>
<li><p><a class="reference internal" href="#shim-defer-posting-to-exit-experimental" id="id23">[–shim_defer_posting_to_exit] EXPERIMENTAL</a></p></li>
<li><p><a class="reference internal" href="#shim-post-minterval-interval-experimental" id="id24">[–shim_post_minterval <em>interval</em> ] EXPERIMENTAL</a></p></li>
<li><p><a class="reference internal" href="#shim-skip-parent-open-files-experimental" id="id25">[–shim_skip_parent_open_files] EXPERIMENTAL</a></p></li>
<li><p><a class="reference internal" href="#sleep-time" id="id26">[–sleep <em>time</em> ]</a></p></li>
<li><p><a class="reference internal" href="#sub-subtopic-key" id="id27">[-sub|–subtopic &lt;key&gt;]</a></p></li>
<li><p><a class="reference internal" href="#suppress-duplicates-sd-nd-no-duplicates-cache-on-off-999" id="id28">[–suppress_duplicates|-sd|-nd|–no_duplicates|–cache on|off|999]</a></p></li>
<li><p><a class="reference internal" href="#to-to-destination-destination" id="id29">[-to|–to &lt;destination&gt;,&lt;destination&gt;,… ]</a></p></li>
<li><p><a class="reference internal" href="#sum-sum-string" id="id30">[-sum|–sum &lt;string&gt;]</a></p></li>
<li><p><a class="reference internal" href="#tp-topicprefix-key" id="id31">[-tp|–topicPrefix &lt;key&gt;]</a></p></li>
<li><p><a class="reference internal" href="#header-name-value" id="id32">[-header &lt;name&gt;=&lt;value&gt;]</a></p>
<ul>
<li><p><a class="reference internal" href="#header-sum-flag-sum" id="id33">[-header sum=&lt;flag,sum&gt;]</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#shim-library-usage" id="id34">SHIM LIBRARY USAGE</a></p>
<ul>
<li><p><a class="reference internal" href="#shim-usage-tips" id="id35">Shim Usage Tips</a></p></li>
<li><p><a class="reference internal" href="#rename-processing" id="id36">Rename Processing</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#administrator-specific" id="id37">ADMINISTRATOR SPECIFIC</a></p>
<ul>
<li><p><a class="reference internal" href="#queue-queue-name-qn-queue" id="id38">[–queue|–queue_name|-qn] &lt;queue&gt;</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#developer-specific-options" id="id39">DEVELOPER SPECIFIC OPTIONS</a></p>
<ul>
<li><p><a class="reference internal" href="#debug-debug" id="id40">[-debug|–debug]</a></p></li>
<li><p><a class="reference internal" href="#r-randomize" id="id41">[-r|–randomize]</a></p></li>
<li><p><a class="reference internal" href="#rc-reconnect" id="id42">[-rc|–reconnect]</a></p></li>
<li><p><a class="reference internal" href="#parts" id="id43">[–parts]</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#environment-variables" id="id44">ENVIRONMENT VARIABLES</a></p></li>
<li><p><a class="reference internal" href="#see-also" id="id45">SEE ALSO</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<section id="synopsis">
<h3><a class="toc-backref" href="#id7">SYNOPSIS</a><a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h3>
<p><strong>sr_post|sr_cpost</strong> [ <em>OPTIONS</em> ][ <em>-pb|–post_broker broker</em> ][ <em>-pbu|–post_base_url url[,url]…*</em> ]
[ <em>-p|–path ] path1 path2…pathN</em> ]</p>
<p>( also <strong>libsrshim.so</strong> )</p>
</section>
<section id="description">
<h3><a class="toc-backref" href="#id8">DESCRIPTION</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h3>
<p><strong>sr_post</strong> posts the availability of a file by creating an announcement.
In contrast to most other sarracenia components that act as daemons,
sr_post is a one shot invocation which posts and exits.
Subscribers use <a class="reference external" href="sr3.1.rst#subscribe">sr_subscribe</a></p>
<p>To make files available to subscribers, <strong>sr_post</strong> sends the announcements
to an AMQP server, also called a broker.</p>
<p>This manual page is primarily concerned with the python implementation,
but there is also an implementation in C, which works nearly identically.
Differences:</p>
<blockquote>
<div><ul class="simple">
<li><p>plugins are not supported in the C implementation.</p></li>
<li><p>C implementation uses POSIX regular expressions, python3 grammar is slightly different.</p></li>
<li><p>when the <em>sleep</em> option ( used only in the C implementation) is set to &gt; 0,
it transforms sr_cpost into a daemon that works like <a class="reference external" href="sr3.1.rst#watch">sr_watch(1)</a>.</p></li>
</ul>
</div></blockquote>
<section id="mandatory-settings">
<h4><a class="toc-backref" href="#id9">Mandatory Settings</a><a class="headerlink" href="#mandatory-settings" title="Permalink to this headline">¶</a></h4>
<p>The [<em>-pbu|–post_base_url url,url,…</em>] option specifies the location
subscribers will download the file from.  There is usually one post per file.
Format of argument to the <em>post_base_url</em> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ftp</span><span class="o">|</span><span class="n">http</span><span class="o">|</span><span class="n">sftp</span><span class="p">]:</span><span class="o">//</span><span class="p">[</span><span class="n">user</span><span class="p">[:</span><span class="n">password</span><span class="p">]</span><span class="o">@</span><span class="p">]</span><span class="n">host</span><span class="p">[:</span><span class="n">port</span><span class="p">]</span><span class="o">/</span>
<span class="ow">or</span>
<span class="n">file</span><span class="p">:</span>
</pre></div>
</div>
<p>When several urls are given as a comma separated list to <em>post_base_url</em>, the
url´s provided are used round-robin style, to provide a coarse form of load balancing.</p>
<p>The [<em>-p|–path path1 path2 .. pathN</em>] option specifies the path of the files
to be announced. There is usually one post per file.
Format of argument to the <em>path</em> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">absolute_path_to_the</span><span class="o">/</span><span class="n">filename</span>
<span class="ow">or</span>
<span class="n">relative_path_to_the</span><span class="o">/</span><span class="n">filename</span>
</pre></div>
</div>
<p>The <em>-pipe</em> option can be specified to have sr_post read path names from standard
input as well.</p>
<p>An example invocation of <em>sr_post</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr_post</span> <span class="o">-</span><span class="n">pb</span> <span class="n">amqp</span><span class="p">:</span><span class="o">//</span><span class="n">broker</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">pbu</span> <span class="n">sftp</span><span class="p">:</span><span class="o">//</span><span class="n">stanley</span><span class="nd">@mysftpserver</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">shared</span><span class="o">/</span><span class="n">products</span><span class="o">/</span><span class="n">foo</span>
</pre></div>
</div>
<p>By default, sr_post reads the file /data/shared/products/foo and calculates its checksum.
It then builds a post message, logs into broker.com as user ‘guest’ (default credentials)
and sends the post  to defaults vhost ‘/’ and default exchange. The default exchange
is the prefix <em>xs_</em> followed by the broker username, hence defaulting to ‘xs_guest’.
A subscriber can download the file /data/shared/products/foo by authenticating as user stanley
on mysftpserver.com using the sftp protocol to broker.com assuming he has proper credentials.
The output of the command is as follows</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">Published</span> <span class="n">xs_guest</span> <span class="n">v02</span><span class="o">.</span><span class="n">post</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">products</span><span class="o">.</span><span class="n">foo</span> <span class="s1">&#39;20150813161959.854 sftp://stanley@mysftpserver.com/ /data/shared/products/foo&#39;</span> <span class="nb">sum</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="mi">82</span><span class="n">edc8eb735fd99598a1fe04541f558d</span> <span class="n">parts</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">4574</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
<p>In MetPX-Sarracenia, each post is published under a certain topic.
The log line starts with ‘[INFO]’, followed by the <strong>topic</strong> of the
post. Topics in <em>AMQP</em> are fields separated by dot. The complete topic starts with
a topicPrefix (see option), version <em>V02</em>, an action <em>post</em>,
followed by a subtopic (see option) here the default, the file path separated with dots
<em>data.shared.products.foo</em>.</p>
<p>The second field in the log line is the message notice.  It consists of a time
stamp <em>20150813161959.854</em>, and the source URL of the file in the last 2 fields.</p>
<p>The rest of the information is stored in AMQP message headers, consisting of key=value pairs.
The <em>sum=d,82edc8eb735fd99598a1fe04541f558d</em> header gives file fingerprint (or checksum
) information.  Here, <em>d</em> means md5 checksum performed on the data, and <em>82edc8eb735fd99598a1fe04541f558d</em>
is the checksum value. The <em>parts=1,4574,1,0,0</em> state that the file is available in 1 part of 4574 bytes
(the filesize.)  The remaining <em>1,0,0</em> is not used for transfers of files with only one part.</p>
<p>Another example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr_post</span> <span class="o">-</span><span class="n">pb</span> <span class="n">mqtt</span><span class="p">:</span><span class="o">//</span><span class="n">broker</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">pbd</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">public_data</span> <span class="o">-</span><span class="n">pbu</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">dd</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span> <span class="o">-</span><span class="n">p</span> <span class="n">bulletins</span><span class="o">/</span><span class="n">alphanumeric</span><span class="o">/</span><span class="n">SACN32_CWAO_123456</span>
</pre></div>
</div>
<p>By default, sr_post reads the file /data/web/public_data/bulletins/alphanumeric/SACN32_CWAO_123456
(concatenating the post_base_dir and relative path of the source url to obtain the local file path)
and calculates its checksum. It then builds a post message, logs into broker.com as user ‘guest’
(default credentials) and sends the post to defaults vhost ‘/’ and exchange ‘xs_guest’, resulting
in publication to the MQTT broker under the topic: <em>xs_guest/v03/bulletins/alphanumeric/SACN32_CWAO_123456</em></p>
<p>A subscriber can download the file <a class="reference external" href="http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_123456">http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_123456</a> using http
without authentication on dd.weather.gc.ca.</p>
</section>
</section>
<section id="arguments-and-options">
<h3><a class="toc-backref" href="#id10">ARGUMENTS AND OPTIONS</a><a class="headerlink" href="#arguments-and-options" title="Permalink to this headline">¶</a></h3>
<p>Please refer to the <a class="reference external" href="sr3.1.rst#subscribe">sr_subscribe(1)</a> manual page for a detailed description of
common settings, and methods of specifying them.</p>
<section id="c-config-configfile">
<h4><a class="toc-backref" href="#id11">[-c|–config &lt;configfile&gt;]</a><a class="headerlink" href="#c-config-configfile" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>A list of settings in a configuration file</p>
</div></blockquote>
</section>
<section id="p-path-path1-path2-pathn">
<h4><a class="toc-backref" href="#id12">[-p|–path path1 path2 … pathN]</a><a class="headerlink" href="#p-path-path1-path2-pathn" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p><strong>sr_post</strong> evaluates the filesystem paths from the <strong>path</strong> option
and possibly the <strong>base_dir</strong> if the option is used.</p>
<p>If a path defines a file, this file is announced.</p>
<p>If a path defines a directory, then all files in that directory are
announced…</p>
</div></blockquote>
</section>
<section id="pb-post-broker-broker">
<h4><a class="toc-backref" href="#id13">[-pb|–post_broker &lt;broker&gt;]</a><a class="headerlink" href="#pb-post-broker-broker" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>the broker to which the post is sent.</p>
</div></blockquote>
</section>
<section id="pbd-post-base-dir-path">
<h4><a class="toc-backref" href="#id14">[-pbd|–post_base_dir &lt;path&gt;]</a><a class="headerlink" href="#pbd-post-base-dir-path" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The <em>base_dir</em> option supplies the directory path that,
when combined (or found) in the given <em>path</em>,
gives the local absolute path to the data file to be posted.
The document root part of the local path will be removed from the posted announcement.
For sftp URLs: it can be appropriate to specify a path relative to a user account.
Example of that usage would be:  -dr ~user  -post_base_url sftp:user&#64;host
For file URLs: base_dir is usually not appropriate.  To post an absolute path,
omit the -dr setting, and just specify the complete path as an argument.</p>
</div></blockquote>
</section>
<section id="px-post-exchange-exchange">
<h4><a class="toc-backref" href="#id15">[-px|–post_exchange &lt;exchange&gt;]</a><a class="headerlink" href="#px-post-exchange-exchange" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Sr_post publishes to an exchange named <em>xs_</em>”broker_username” by default.
Use the <em>post_exchange</em> option to override that default.</p>
</div></blockquote>
</section>
<section id="h-help-help">
<h4><a class="toc-backref" href="#id16">[-h|-help|–help]</a><a class="headerlink" href="#h-help-help" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Display program options.</p>
</div></blockquote>
</section>
<section id="blocksize-value">
<h4><a class="toc-backref" href="#id17">[–blocksize &lt;value&gt;]</a><a class="headerlink" href="#blocksize-value" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>This option controls the partitioning strategy used to post files.
The value should be one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span> <span class="o">-</span> <span class="n">autocompute</span> <span class="n">an</span> <span class="n">appropriate</span> <span class="n">partitioning</span> <span class="n">strategy</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="mi">1</span> <span class="o">-</span> <span class="n">always</span> <span class="n">send</span> <span class="n">entire</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">single</span> <span class="n">part</span><span class="o">.</span>
<span class="o">&lt;</span><span class="n">blocksize</span><span class="o">&gt;</span> <span class="o">-</span> <span class="n">used</span> <span class="n">a</span> <span class="n">fixed</span> <span class="n">partition</span> <span class="n">size</span> <span class="p">(</span><span class="n">example</span> <span class="n">size</span><span class="p">:</span> <span class="mi">1</span><span class="n">M</span> <span class="p">)</span>
</pre></div>
</div>
<p>Files can be announced as multiple parts.  Each part has a separate checksum.
The parts and their checksums are stored in the cache. Partitions can traverse
the network separately, and in parallel.  When files change, transfers are
optimized by only sending parts which have changed.</p>
<p>The value of the <em>blocksize</em>  is an integer that may be followed by  letter designator <em>[B|K|M|G|T]</em> meaning:
for Bytes, Kilobytes, Megabytes, Gigabytes, Terabytes respectively.  All these references are powers of 2.
Files bigger than this value will get announced with <em>blocksize</em> sized parts.</p>
<p>The autocomputation algorithm determines a blocksize that encourages a reasonable number of parts
for files of various sizes.  As the file size varies, the automatic computation will give different
results.  This will result in resending information which has not changed as partitions of a different
size will have different sums, and therefore be tagged as different.</p>
<p>By default, <strong>sr_post</strong> computes a reasonable blocksize that depends on the file size.
The user can set a fixed <em>blocksize</em> if it is better for its products or if he wants to
take advantage of the <strong>cache</strong> mechanism.  In cases where large files are being appended to, for example,
it make sense to specify a fixed partition size so that the blocks in the cache will be the
same blocks as those generated when the file is larger, and so avoid re-transmission.  So use
of ‘10M’ would make sense in that case.</p>
<p>In cases where a custom downloader is used which does not understand partitioning, it is necessary
to avoid having the file split into parts, so one would specify ‘1’ to force all files to be sent
as a single part.</p>
</div></blockquote>
</section>
<section id="pbu-post-base-url-url">
<h4><a class="toc-backref" href="#id18">[-pbu|–post_base_url &lt;url&gt;]</a><a class="headerlink" href="#pbu-post-base-url-url" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The <strong>url</strong> option sets the protocol, credentials, host and port under
which the product can be fetched.</p>
<p>The AMQP announcememet is made of the three fields, the announcement time,
this <strong>url</strong> value and the given <strong>path</strong> to which was withdrawn from the <em>base_dir</em>
if necessary.</p>
<p>The concatenation of the two last fields of the announcement defines
what the subscribers will use to download the product.</p>
</div></blockquote>
</section>
<section id="pipe-boolean">
<h4><a class="toc-backref" href="#id19">[-pipe &lt;boolean&gt;]</a><a class="headerlink" href="#pipe-boolean" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The pipe option is for sr_post to read the names of the files to post from standard input to read from
redirected files, or piped output of other commands. Default is False, accepting file names only on the command line.</p>
</div></blockquote>
</section>
<section id="pulse-message-message">
<h4><a class="toc-backref" href="#id20">[–pulse_message &lt;message&gt;]</a><a class="headerlink" href="#pulse-message-message" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Administrator option to send a message to all subscribers.  Similar to “wall” functionality.
When this option is set, a pulse message is sent, ignoring any topic settings or files given as arguments.</p>
</div></blockquote>
</section>
<section id="reset">
<h4><a class="toc-backref" href="#id21">[–reset]</a><a class="headerlink" href="#reset" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>When one has used <strong>–suppress_duplicates|–cache</strong>, this option empties the cache.</p>
</div></blockquote>
</section>
<section id="rn-rename-path">
<h4><a class="toc-backref" href="#id22">[-rn|–rename &lt;path&gt;]</a><a class="headerlink" href="#rn-rename-path" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>With the <em>rename</em>  option, the user can suggest a destination path to its files. If the given
path ends with ‘/’ it suggests a directory path…  If it doesn’t, the option specifies a file renaming.</p>
</div></blockquote>
<p><em>sr_post</em>, and <em>sr_watch</em> use a file based model based on a process and a disk cache,
whose design is single threaded. The shim library is typically used by many processes
at once, and would have resource contention and/or corruption issues with the cache.
The shim library therefore has a purely memory-based cache, tunable with
the following shim_ options.</p>
</section>
<section id="shim-defer-posting-to-exit-experimental">
<h4><a class="toc-backref" href="#id23">[–shim_defer_posting_to_exit] EXPERIMENTAL</a><a class="headerlink" href="#shim-defer-posting-to-exit-experimental" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Postpones file posting until the process exits.
In cases where the same file is repeatedly opened and appended to, this
setting can avoid redundant posts.  (default: False)</p>
</div></blockquote>
</section>
<section id="shim-post-minterval-interval-experimental">
<h4><a class="toc-backref" href="#id24">[–shim_post_minterval <em>interval</em> ] EXPERIMENTAL</a><a class="headerlink" href="#shim-post-minterval-interval-experimental" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>If a file is opened for writing and closed multiple times within the interval,
it will only be posted once. When a file is written to many times, particularly
in a shell script, it makes for many posts, and shell script affects performance.
subscribers will not be able to make copies quickly enough in any event, so
there is little benefit, in say, 100 posts of the same file in the same second.
It is wise set an upper limit on the frequency of posting a given file. (default: 5s)
Note: if a file is still open, or has been closed after its previous post, then
during process exit processing it will be posted again, even if the interval
is not respected, in order to provide the most accurate final post.</p>
</div></blockquote>
</section>
<section id="shim-skip-parent-open-files-experimental">
<h4><a class="toc-backref" href="#id25">[–shim_skip_parent_open_files] EXPERIMENTAL</a><a class="headerlink" href="#shim-skip-parent-open-files-experimental" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The shim_skip_ppid_open_files option means that a process checks
whether the parent process has the same file open, and does not
post if that is the case. (default: True)</p>
</div></blockquote>
</section>
<section id="sleep-time">
<h4><a class="toc-backref" href="#id26">[–sleep <em>time</em> ]</a><a class="headerlink" href="#sleep-time" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p><strong>This option is only available in the c implementation (sr_cpost)</strong></p>
<p>When the option is set, it transforms cpost into a sr_watch, with <em>sleep</em> being the time to wait between
generating events.  When files are written frequently, it is counter productive to produce a post for
every change, as it can produce a continuous stream of changes where the transfers cannot be done quickly
enough to keep up.  In such circumstances, one can group all changes made to a file
in <em>sleep</em> time, and produce a single post.</p>
<dl class="simple">
<dt>NOTE::</dt><dd><p>in sr_cpost, when combined with force_polling (see <a class="reference external" href="sr3.1.rst#watch">sr_watch(1)</a> ) the sleep
interval should not be less than about five seconds, as it may miss posting some files.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="sub-subtopic-key">
<h4><a class="toc-backref" href="#id27">[-sub|–subtopic &lt;key&gt;]</a><a class="headerlink" href="#sub-subtopic-key" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The subtopic default can be overwritten with the <em>subtopic</em> option.</p>
</div></blockquote>
</section>
<section id="suppress-duplicates-sd-nd-no-duplicates-cache-on-off-999">
<h4><a class="toc-backref" href="#id28">[–suppress_duplicates|-sd|-nd|–no_duplicates|–cache on|off|999]</a><a class="headerlink" href="#suppress-duplicates-sd-nd-no-duplicates-cache-on-off-999" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Avoid posting duplicates by comparing each file to those seen during the
<em>suppress_duplicates</em> interval. When posting directories, will cause
<em>sr_post</em> post only files (or parts of files) that were new when invoked again.</p>
<p>Over time, the number of files in the cache can grow too large, and so it is cleaned out of
old entries. The default lifetime of a cache entry is five minutes (300 seconds). This
lifetime can be overridden with a time interval as argument ( the 999 above ).</p>
<p>If duplicate suppression is in use,  one should ensure that a fixed <strong>blocksize</strong> is
used ( set to a value other than 0 ) as otherwise blocksize will vary as files grow,
and much duplicate data transfer will result.</p>
</div></blockquote>
</section>
<section id="to-to-destination-destination">
<h4><a class="toc-backref" href="#id29">[-to|–to &lt;destination&gt;,&lt;destination&gt;,… ]</a><a class="headerlink" href="#to-to-destination-destination" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>A comma-separated list of destination clusters to which the posted data should be sent.
Ask pump administrators for a list of valid destinations.</p>
<p>Default: the hostname of the broker.</p>
<p><em>FIXME: a good list of destination should be discoverable.</em></p>
</div></blockquote>
</section>
<section id="sum-sum-string">
<h4><a class="toc-backref" href="#id30">[-sum|–sum &lt;string&gt;]</a><a class="headerlink" href="#sum-sum-string" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>All file posts include a checksum.  The <em>sum</em> option specifies how to calculate the it.
It is a comma separated string.  Valid checksum flags are</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="o">|</span><span class="n">a</span><span class="o">|</span><span class="n">n</span><span class="o">|</span><span class="n">d</span><span class="o">|</span><span class="n">s</span><span class="o">|</span><span class="n">z</span><span class="p">]</span>
<span class="n">where</span> <span class="mi">0</span> <span class="p">:</span> <span class="n">no</span> <span class="n">checksum</span><span class="o">...</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">post</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">random</span> <span class="n">integer</span> <span class="p">(</span><span class="n">only</span> <span class="k">for</span> <span class="n">testing</span><span class="o">/</span><span class="n">debugging</span><span class="o">.</span><span class="p">)</span>
      <span class="n">a</span> <span class="p">:</span> <span class="n">arbitrary</span> <span class="n">application</span> <span class="n">defined</span> <span class="n">checksum</span> <span class="p">(</span><span class="n">cannot</span> <span class="n">calculate</span><span class="p">,</span> <span class="n">must</span> <span class="n">store</span><span class="p">)</span>
      <span class="n">d</span> <span class="p">:</span> <span class="n">do</span> <span class="n">md5sum</span> <span class="n">on</span> <span class="n">file</span> <span class="n">content</span> <span class="p">(</span><span class="n">default</span> <span class="k">for</span> <span class="n">now</span><span class="p">,</span> <span class="n">compatibility</span><span class="p">)</span>
      <span class="n">n</span> <span class="p">:</span> <span class="n">do</span> <span class="n">md5sum</span> <span class="n">checksum</span> <span class="n">on</span> <span class="n">filename</span>
      <span class="n">p</span> <span class="p">:</span> <span class="n">do</span> <span class="n">SHA512</span> <span class="n">checksum</span> <span class="n">on</span> <span class="n">filename</span> <span class="ow">and</span> <span class="n">partition</span> <span class="n">string</span> <span class="p">[</span><span class="c1">#]_</span>
      <span class="n">s</span> <span class="p">:</span> <span class="n">do</span> <span class="n">SHA512</span> <span class="n">on</span> <span class="n">file</span> <span class="n">content</span> <span class="p">(</span><span class="n">default</span> <span class="ow">in</span> <span class="n">future</span><span class="p">)</span>
      <span class="n">z</span><span class="p">,</span><span class="n">a</span> <span class="p">:</span> <span class="n">calculate</span> <span class="n">checksum</span> <span class="n">value</span> <span class="n">using</span> <span class="n">algorithm</span> <span class="n">a</span> <span class="ow">and</span> <span class="n">assign</span> <span class="n">after</span> <span class="n">download</span><span class="o">.</span>
</pre></div>
</div>
<p>Then using a checksum script, it must be registered with the pumping network, so that consumers
of the postings have access to the algorithm.</p>
</div></blockquote>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets">1</span></dt>
<dd><p>The <em>p</em> algorithm is only implemented in C ( <a class="reference external" href="https://github.com/MetPX/sarracenia/issues/117">https://github.com/MetPX/sarracenia/issues/117</a> )</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On Unix derived systems (including linux and mac) the checksums are stored in extended
file attributes. This is necessary for the <em>a</em> attribute to work, since we have no means
of calculating that checksum. We have not found a method to do the equivalent on Windows
yet, so products announced with <em>a</em> will always be downloaded there.
This is awful.</p>
</div>
</section>
<section id="tp-topicprefix-key">
<h4><a class="toc-backref" href="#id31">[-tp|–topicPrefix &lt;key&gt;]</a><a class="headerlink" href="#tp-topicprefix-key" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p><em>Not usually used</em>
By default, the topic is made of the default topicPrefix : version <em>V02</em>, an action <em>post</em>,
followed by the default subtopic: the file path separated with dots (dot being the topic separator for amqp).
You can overwrite the topicPrefix by setting this option.</p>
</div></blockquote>
</section>
<section id="header-name-value">
<h4><a class="toc-backref" href="#id32">[-header &lt;name&gt;=&lt;value&gt;]</a><a class="headerlink" href="#header-name-value" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Add a &lt;name&gt; header with the given value to advertisements. Used to pass strings as metadata.</p>
</div></blockquote>
<section id="header-sum-flag-sum">
<h5><a class="toc-backref" href="#id33">[-header sum=&lt;flag,sum&gt;]</a><a class="headerlink" href="#header-sum-flag-sum" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><p>Checksums can be attached to a file by specifying the sum string value in the header on startup with the
‘a’ (application) scheme indicated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr_post</span> <span class="o">-</span><span class="n">header</span> <span class="nb">sum</span><span class="o">=</span><span class="n">a</span><span class="p">,</span><span class="mi">65537</span> <span class="o">&lt;</span><span class="n">fileName</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">configName</span><span class="o">&gt;</span> <span class="n">start</span><span class="o">|</span><span class="n">foreground</span>
</pre></div>
</div>
<p>where <strong>fileName(s)</strong> can be a list of space separated files or a value containing regex syntax (path must
be specified if not located in the current directory). The <strong>user.sr_sum</strong> and <strong>user.sr_mtime</strong> extended
attributes of the files will be updated before being posted. These attributes can also be set using
commandline utilities like xattr.</p>
</div></blockquote>
</section>
</section>
</section>
<section id="shim-library-usage">
<h3><a class="toc-backref" href="#id34">SHIM LIBRARY USAGE</a><a class="headerlink" href="#shim-library-usage" title="Permalink to this headline">¶</a></h3>
<p>Rather than invoking a sr_post to post each file to publish, one can have processes automatically
post the files they right by having them use a shim library intercepting certain file i/o calls to libc
and the kernel. To activate the shim library, in the shell environment add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">SR_POST_CONFIG</span><span class="o">=</span><span class="n">shimpost</span><span class="o">.</span><span class="n">conf</span>
<span class="n">export</span> <span class="n">LD_PRELOAD</span><span class="o">=</span><span class="s2">&quot;libsrshim.so.1&quot;</span>
</pre></div>
</div>
<p>where <em>shimpost.conf</em> is an sr_cpost configuration file in
the ~/.config/sarra/post/ directory. An sr_cpost configuration file is the same
as an sr_post one, except that plugins are not supported.  With the shim
library in place, whenever a file is written, the <em>accept/reject</em> clauses of
the shimpost.conf file are consulted, and if accepted, the file is posted just
as it would be by sr_post. If using with ssh, where one wants files which are
scp’d to be posted, one needs to include the activation in the .bashrc and pass
it the configuration to use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">expoert</span> <span class="n">LC_SRSHIM</span><span class="o">=</span><span class="n">shimpost</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>Then in the ~/.bashrc on the server running the remote command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>if [ &quot;$LC_SRSHIM&quot; ]; then
    export SR_POST_CONFIG=$LC_SRSHIM
    export LD_PRELOAD=&quot;libsrshim.so.1&quot;
fi
</pre></div>
</div>
<p>SSH will only pass environment variables that start with LC_ (locale) so to get it
passed with minimal effort, we use that prefix.</p>
<section id="shim-usage-tips">
<h4><a class="toc-backref" href="#id35">Shim Usage Tips</a><a class="headerlink" href="#shim-usage-tips" title="Permalink to this headline">¶</a></h4>
<p>This method of notification does require some user environment setup.
The user environment needs to the LD_PRELOAD environment variable set
prior to launch of the process. Complications that remain as we have
been testing for two years since the shim library was first implemented:</p>
<ul class="simple">
<li><p>if we want to notice files created by remote scp processes (which create non-login shells)
then the environment hook must be in .bashrc. and using an environment
variable that starts with <em>LC_</em> to have ssh transmit the configuration value without
having to modify sshd configuration in typical linux distributions.
( full discussion: <a class="reference external" href="https://github.com/MetPX/sarrac/issues/66">https://github.com/MetPX/sarrac/issues/66</a> )</p></li>
<li><p>code that has certain weaknesses, such as in FORTRAN a lack of IMPLICIT NONE
<a class="reference external" href="https://github.com/MetPX/sarracenia/issues/69">https://github.com/MetPX/sarracenia/issues/69</a> may crash when the shim library
is introduced. The correction needed in those cases has so far been to correct
the application, and not the library.
( also: <a class="reference external" href="https://github.com/MetPX/sarrac/issues/12">https://github.com/MetPX/sarrac/issues/12</a> )</p></li>
<li><p>codes using the <em>exec</em> call ot <a class="reference external" href="www.tcl.tk">tcl/tk</a>, by default considers any
output to file descriptor 2 (standard error) as an error condition.
these messages can be labelled as INFO, or WARNING priority, but it will
cause the tcl caller to indicate a fatal error has occurred.  Adding
<em>-ignorestderr</em>  to invocations of <em>exec</em> avoids such unwarranted aborts.</p></li>
<li><p>Complex shell scripts can experience an inordinate performance impact.
Since <em>high performance shell scripts</em> is an oxymoron, the best solution,
performance-wise is to re-write the scripts in a more efficient scripting
language such as python  ( <a class="reference external" href="https://github.com/MetPX/sarrac/issues/15">https://github.com/MetPX/sarrac/issues/15</a> )</p></li>
<li><p>Code bases that move large file hierarchies (e.g. <em>mv tree_with_thousands_of_files new_tree</em> )
will see a much higher cost for this operation, as it is implemented as
a renaming of each file in the tree, rather than a single operation on the root.
This is currently considered necessary because the accept/reject pattern matching
may result in a very different tree on the destination, rather than just the
same tree mirrored. See <a class="reference internal" href="#rename-processing">Rename Processing</a> below for details.</p></li>
<li><p><em>export SR_SHIMDEBUG=1</em> will get your more output than you want. use with care.</p></li>
</ul>
</section>
<section id="rename-processing">
<h4><a class="toc-backref" href="#id36">Rename Processing</a><a class="headerlink" href="#rename-processing" title="Permalink to this headline">¶</a></h4>
<p>It should be noted that file renaming is not as simple in the mirroring case as in the underlying
operating system. While the operation is a single atomic one in an operating system, when
using notifications, there are accept/reject cases that create four possible effects.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 37%" />
<col style="width: 34%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="row-odd"><td></td>
<td colspan="2"><p>old name is:</p></td>
</tr>
<tr class="row-even"><td><p>New name is:</p></td>
<td><p><em>Accepted</em></p></td>
<td><p><em>Rejected</em></p></td>
</tr>
<tr class="row-odd"><td><p><em>Accepted</em></p></td>
<td><p>rename</p></td>
<td><p>copy</p></td>
</tr>
<tr class="row-even"><td><p><em>Rejected</em></p></td>
<td><p>remove</p></td>
<td><p>nothing</p></td>
</tr>
</tbody>
</table>
<p>When a file is moved, two notifications are created:</p>
<ul class="simple">
<li><p>One notification has the new name in the <em>relpath</em>, while containing and <em>oldname</em>
field pointing at the old name.  This will trigger activities in the top half of
the table, either a rename, using the oldname field, or a copy if it is not present
at the destination.</p></li>
<li><p>A second notification with the oldname in <em>relpath</em> which will be accepted
again, but this time it has the <em>newname</em> field, and process the remove action.</p></li>
</ul>
<p>While the renaming of a directory at the root of a large tree is a cheap atomic operation
in Linux/Unix, mirroring that operation requires creating a rename posting for each file
in the tree, and thus is far more expensive.</p>
</section>
</section>
<section id="administrator-specific">
<h3><a class="toc-backref" href="#id37">ADMINISTRATOR SPECIFIC</a><a class="headerlink" href="#administrator-specific" title="Permalink to this headline">¶</a></h3>
<section id="queue-queue-name-qn-queue">
<h4><a class="toc-backref" href="#id38">[–queue|–queue_name|-qn] &lt;queue&gt;</a><a class="headerlink" href="#queue-queue-name-qn-queue" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>If a client wants a product to be reannounced,
the broker administrator can use <em>sr_post</em>  and publish
directly into the client’s queue. The client could provide
his queue_name… or the administrator would find it on
the broker… From the log where the product was processed on
the broker, the administrator would find all the messages
properties. The administrator should pay attention on slight
differences between the logs properties and the <em>sr_post</em> arguments.
The logs would mention <em>from_cluster</em>  <em>to_clusters</em> and associated
values…  <strong>sr_post</strong> arguments would be <em>-cluster</em> and  <em>-to</em>
respectively. The administrator would execute <strong>sr_post</strong>, providing
all the options and setting everything found in the log plus
<em>-queue_name q_….</em></p>
</div></blockquote>
</section>
</section>
<section id="developer-specific-options">
<h3><a class="toc-backref" href="#id39">DEVELOPER SPECIFIC OPTIONS</a><a class="headerlink" href="#developer-specific-options" title="Permalink to this headline">¶</a></h3>
<section id="debug-debug">
<h4><a class="toc-backref" href="#id40">[-debug|–debug]</a><a class="headerlink" href="#debug-debug" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>put more messages in the log.</p>
</div></blockquote>
</section>
<section id="r-randomize">
<h4><a class="toc-backref" href="#id41">[-r|–randomize]</a><a class="headerlink" href="#r-randomize" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>If a file is posted in several blocks, the posting order
is randomized so that the subcriber receives them out of order.
It also randomizes the checksum algorithm used for posting.</p>
</div></blockquote>
</section>
<section id="rc-reconnect">
<h4><a class="toc-backref" href="#id42">[-rc|–reconnect]</a><a class="headerlink" href="#rc-reconnect" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>If a file is posted in several blocks, reconnect to the broker
for every post.</p>
</div></blockquote>
</section>
<section id="parts">
<h4><a class="toc-backref" href="#id43">[–parts]</a><a class="headerlink" href="#parts" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The usual usage of the <em>blocksize</em> option is described above, which is what is usually used to set
the <em>parts</em> header in the messages produced, however there are a number of ways of using the parts flag
that are not generally useful aside from within development.
In addition to the user oriented <em>blocksize</em> specifications listed before, any valid ‘parts’ header, as given in the
parts header (e.g. ‘i,1,150,0,0’) .  One can also specify an alternate basic blocksize for the automatic
algorithm by giving it after the ‘0’, (eg. ‘0,5’) will use 5 bytes (instead of 50M) as the basic block size, so one
can see how the algorithm works.</p>
</div></blockquote>
</section>
</section>
<section id="environment-variables">
<h3><a class="toc-backref" href="#id44">ENVIRONMENT VARIABLES</a><a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h3>
<p>In the C implementation (sr_cpost), if the SR_CONFIG_EXAMPLES variable is set, then the <em>add</em> directive can be used
to copy examples into the user’s directory for use and/or customization.</p>
<p>An entry in the ~/.config/sarra/default.conf (created via sr_subscribe edit default.conf )
could be used to set the variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">declare</span> <span class="n">env</span> <span class="n">SR_CONFIG_EXAMPLES</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span><span class="n">dist</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">sarra</span><span class="o">/</span><span class="n">examples</span>
</pre></div>
</div>
<p>the value should be available from the output of a list command from the python
implementation.</p>
</section>
<section id="see-also">
<h3><a class="toc-backref" href="#id45">SEE ALSO</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="sr3.1.rst#report">sr_report(7)</a> - the format of report messages.</p>
<p><a class="reference external" href="sr3.1.rst#report">sr_report(1)</a> - process report messages.</p>
<p><a class="reference external" href="sr_post.7.rst">sr_post(7)</a> - the format of announcement messages.</p>
<p><a class="reference external" href="sr3.1.rst#sarra">sr_sarra(8)</a> - Subscribe, Acquire, and ReAdvertise tool.</p>
<p><a class="reference external" href="sr3.1.rst#subscribe">sr_subscribe(1)</a> - the http-only download client.</p>
<p><a class="reference external" href="sr3.1.rst#watch">sr_watch(1)</a> - the directory watching daemon.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">SR_Post</a><ul>
<li><a class="reference internal" href="#publish-the-availability-of-a-file-to-subscribers">Publish the Availability of a File to Subscribers</a><ul>
<li><a class="reference internal" href="#synopsis">SYNOPSIS</a></li>
<li><a class="reference internal" href="#description">DESCRIPTION</a><ul>
<li><a class="reference internal" href="#mandatory-settings">Mandatory Settings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#arguments-and-options">ARGUMENTS AND OPTIONS</a><ul>
<li><a class="reference internal" href="#c-config-configfile">[-c|–config &lt;configfile&gt;]</a></li>
<li><a class="reference internal" href="#p-path-path1-path2-pathn">[-p|–path path1 path2 … pathN]</a></li>
<li><a class="reference internal" href="#pb-post-broker-broker">[-pb|–post_broker &lt;broker&gt;]</a></li>
<li><a class="reference internal" href="#pbd-post-base-dir-path">[-pbd|–post_base_dir &lt;path&gt;]</a></li>
<li><a class="reference internal" href="#px-post-exchange-exchange">[-px|–post_exchange &lt;exchange&gt;]</a></li>
<li><a class="reference internal" href="#h-help-help">[-h|-help|–help]</a></li>
<li><a class="reference internal" href="#blocksize-value">[–blocksize &lt;value&gt;]</a></li>
<li><a class="reference internal" href="#pbu-post-base-url-url">[-pbu|–post_base_url &lt;url&gt;]</a></li>
<li><a class="reference internal" href="#pipe-boolean">[-pipe &lt;boolean&gt;]</a></li>
<li><a class="reference internal" href="#pulse-message-message">[–pulse_message &lt;message&gt;]</a></li>
<li><a class="reference internal" href="#reset">[–reset]</a></li>
<li><a class="reference internal" href="#rn-rename-path">[-rn|–rename &lt;path&gt;]</a></li>
<li><a class="reference internal" href="#shim-defer-posting-to-exit-experimental">[–shim_defer_posting_to_exit] EXPERIMENTAL</a></li>
<li><a class="reference internal" href="#shim-post-minterval-interval-experimental">[–shim_post_minterval <em>interval</em> ] EXPERIMENTAL</a></li>
<li><a class="reference internal" href="#shim-skip-parent-open-files-experimental">[–shim_skip_parent_open_files] EXPERIMENTAL</a></li>
<li><a class="reference internal" href="#sleep-time">[–sleep <em>time</em> ]</a></li>
<li><a class="reference internal" href="#sub-subtopic-key">[-sub|–subtopic &lt;key&gt;]</a></li>
<li><a class="reference internal" href="#suppress-duplicates-sd-nd-no-duplicates-cache-on-off-999">[–suppress_duplicates|-sd|-nd|–no_duplicates|–cache on|off|999]</a></li>
<li><a class="reference internal" href="#to-to-destination-destination">[-to|–to &lt;destination&gt;,&lt;destination&gt;,… ]</a></li>
<li><a class="reference internal" href="#sum-sum-string">[-sum|–sum &lt;string&gt;]</a></li>
<li><a class="reference internal" href="#tp-topicprefix-key">[-tp|–topicPrefix &lt;key&gt;]</a></li>
<li><a class="reference internal" href="#header-name-value">[-header &lt;name&gt;=&lt;value&gt;]</a><ul>
<li><a class="reference internal" href="#header-sum-flag-sum">[-header sum=&lt;flag,sum&gt;]</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#shim-library-usage">SHIM LIBRARY USAGE</a><ul>
<li><a class="reference internal" href="#shim-usage-tips">Shim Usage Tips</a></li>
<li><a class="reference internal" href="#rename-processing">Rename Processing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#administrator-specific">ADMINISTRATOR SPECIFIC</a><ul>
<li><a class="reference internal" href="#queue-queue-name-qn-queue">[–queue|–queue_name|-qn] &lt;queue&gt;</a></li>
</ul>
</li>
<li><a class="reference internal" href="#developer-specific-options">DEVELOPER SPECIFIC OPTIONS</a><ul>
<li><a class="reference internal" href="#debug-debug">[-debug|–debug]</a></li>
<li><a class="reference internal" href="#r-randomize">[-r|–randomize]</a></li>
<li><a class="reference internal" href="#rc-reconnect">[-rc|–reconnect]</a></li>
<li><a class="reference internal" href="#parts">[–parts]</a></li>
</ul>
</li>
<li><a class="reference internal" href="#environment-variables">ENVIRONMENT VARIABLES</a></li>
<li><a class="reference internal" href="#see-also">SEE ALSO</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/Reference/sr3_post.1.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">sarracenia 3.00.013 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">SR_Post</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Peter Silva.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>